<md-tabs md-dynamic-height md-selected="ToolsAnrService.currentTab">
    <md-tab label="{{ 'General information' | translate }}">
        <div class="md-padding">
            <md-button ng-click="editAnrInfo($event)"><md-icon>edit</md-icon> {{ 'Edit risk analysis details' | translate }}</md-button>
            <md-button ng-click="exportAnr($event)" ng-disabled="isSafari()"><md-icon>save</md-icon> {{ 'Export risk analysis' | translate }}</md-button>
            <md-button ng-click="deleteAnr($event)" ng-if="OFFICE_MODE == 'FO'"><md-icon>delete</md-icon> {{ 'Delete risk analysis' | translate }}</md-button>

            <h4 translate>Calculation of risk / Thresholds - Information Risks</h4>

            <div layout="row">
                <table class="tbl-risk-calc">
                    <tbody>
                    <tr>
                        <th></th>
                        <th ng-repeat="v in info_risk_columns">{{v}}</th>
                    </tr>
                    <tr ng-repeat="i in info_risk_rows">
                        <th>{{i}}</th>
                        <td ng-class="{'green': v*i <= thresholds.thresholds.min, 'orange': v*i <= thresholds.thresholds.max && v*i > thresholds.thresholds.min, 'red': v*i > thresholds.thresholds.max}"
                            ng-repeat="v in info_risk_columns">{{v*i}}</td>
                    </tr>
                    </tbody>
                </table>

                <div class="anr-formula-container">
                    <div class="anr-formula">
                        <span class="green">R</span> = I x ( M x V )
                    </div>
                    <p class="md-caption">{{ 'R: Risk, I: Impact, M: Threat, V: Vulnerability' | translate }}</p>
                </div>
            </div>

            <h4 translate>Calculation of risk / Thresholds - Operational Risks</h4>

            <div layout="row" layout-align="start center">
                <p class="anr-table-sidetitle" translate>Impact</p>
                <table class="tbl-risk-calc">
                    <tbody>
                    <tr>
                        <td></td>
                        <td colspan="{{scales.threats.max - scales.threats.min + 1 }}" class="anr-table-toptitle" translate>Probability</td>
                    </tr>
                    <tr>
                        <th></th>
                        <th ng-repeat="p in range(scales.threats.min, scales.threats.max)">{{p}}</th>
                    </tr>
                    <tr ng-repeat="i in range(scales.impacts.min, scales.impacts.max)">
                        <th>{{i}}</th>
                        <td ng-repeat="p in range(scales.threats.min, scales.threats.max)"
                            ng-class="{'green': p*i <= thresholds.rolf_thresholds.min, 'orange': p*i <= thresholds.rolf_thresholds.max && p*i > thresholds.rolf_thresholds.min, 'red': p*i > thresholds.rolf_thresholds.max}">{{i*p}}</td>
                    </tr>
                    </tbody>
                </table>

                <div class="anr-formula-container">
                    <div class="anr-formula">
                        <span class="green">R</span> = I x P
                    </div>

                    <p class="md-caption">{{ 'R: Risk, I: Impact, P: Probability' | translate }}</p>
                </div>
            </div>

        </div>
    </md-tab>

    <md-tab label="{{ 'Risks table' | translate }}">
        <ng-include src="'views/anr/_table_risks.html'"></ng-include>
    </md-tab>
    <ng-include src="'views/anr/_table_risks_op.html'"></ng-include>
</md-tabs>
